---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.split('/')[1]; // Obtient la première partie du chemin (après le premier /)
---

<header class="fixed top-0 left-0 right-0 z-50 bg-gradient-to-br from-leaf-200 to-leaf-100 border-b border-leaf-400/50 backdrop-blur-md h-16">
  <nav class="container mx-auto px-6">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2">
        <img src="/images/logo.svg" alt="Logo Potager Expert" class="h-8 w-8" />
        <span class="text-xl font-display font-bold text-leaf-950">Potager Expert</span>
      </a>

      <!-- Navigation desktop -->
      <div class="hidden md:flex items-center space-x-8">
        <a 
          href="/" 
          class={`text-leaf-800 hover:text-leaf-900 font-medium transition-colors duration-200 ${
            currentPath === "" 
              ? "text-leaf-900" 
              : ""
          }`}
        >
          Accueil
        </a>
        <a 
          href="/blog" 
          class={`text-leaf-800 hover:text-leaf-900 font-medium transition-colors duration-200 ${
            currentPath === "blog" 
              ? "text-leaf-900" 
              : ""
          }`}
        >
          Blog
        </a>
        <a 
          href="/contact" 
          class={`text-leaf-800 hover:text-leaf-900 font-medium transition-colors duration-200 ${
            currentPath === "contact" 
              ? "text-leaf-900" 
              : ""
          }`}
        >
          Contact
        </a>
      </div>

      <!-- Menu mobile -->
      <div class="md:hidden">
        <button 
          id="menu-toggle"
          aria-expanded="false"
          aria-controls="mobile-menu"
          aria-label="Menu principal"
          class="p-2 rounded-lg bg-leaf-100/70 border border-leaf-400/50 text-leaf-800 hover:bg-leaf-100/80 transition-colors duration-200"
        >
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-6 w-6" 
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Menu mobile panel -->
  <div 
    id="mobile-menu" 
    class="hidden md:hidden bg-leaf-100/95 border-t border-leaf-400/50 backdrop-blur-md"
    aria-labelledby="menu-toggle"
    role="navigation"
  >
    <div class="container mx-auto px-6 py-4 space-y-4">
      <a 
        href="/" 
        class={`block text-leaf-800 hover:text-leaf-900 font-medium transition-colors duration-200 ${
          currentPath === "" 
            ? "text-leaf-900" 
            : ""
        }`}
      >
        Accueil
      </a>
      <a 
        href="/blog" 
        class={`block text-leaf-800 hover:text-leaf-900 font-medium transition-colors duration-200 ${
          currentPath === "blog" 
            ? "text-leaf-900" 
            : ""
        }`}
      >
        Blog
      </a>
      <a 
        href="/contact" 
        class={`block text-leaf-800 hover:text-leaf-900 font-medium transition-colors duration-200 ${
          currentPath === "contact" 
            ? "text-leaf-900" 
            : ""
        }`}
      >
        Contact
      </a>
    </div>
  </div>
</header>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');

  menuToggle?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });
</script>
