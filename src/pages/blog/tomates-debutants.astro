---
import Layout from '../../layouts/Layout.astro';
import { blogPosts } from '../../data/blog';
import TableOfContents from '../../components/TableOfContents.astro';
import RecommendedPosts from '../../components/RecommendedPosts.astro';
import BlogPostHeader from '../../components/BlogPostHeader.astro';
import ShareButtons from '../../components/ShareButtons.astro';
import ReadingProgress from '../../components/ReadingProgress.astro';
import { ViewTransitions } from 'astro:transitions';

const post = blogPosts.find(p => p.slug === 'tomates-debutants');
if (!post) throw new Error('Article non trouvé');

const currentUrl = new URL(Astro.url.pathname, Astro.site).toString();

const headings = [
  { text: "Pourquoi cultiver des tomates ?", slug: "pourquoi", depth: 2 },
  { text: "Choisir ses variétés", slug: "varietes", depth: 2 },
  { text: "Les secrets des semis", slug: "semis", depth: 2 },
  { text: "La plantation au top", slug: "plantation", depth: 2 },
  { text: "L'entretien au quotidien", slug: "entretien", depth: 2 },
  { text: "La récolte et ses secrets", slug: "recolte", depth: 2 }
];
---

<Layout title={post.title}>
  <head slot="head">
    <ViewTransitions />
    <meta name="description" content={post.excerpt} />
    <meta property="og:title" content={post.title} />
    <meta property="og:description" content={post.excerpt} />
    <meta property="og:image" content={post.image} />
    <meta property="og:type" content="article" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="author" content={post.author} />
    <meta name="reading-time" content={post.readingTime} />
    <link rel="canonical" href={currentUrl} />
  </head>

  <ReadingProgress />
  <div class="h-24"></div>
  
  <BlogPostHeader
    title={post.title}
    category={post.category}
    author={post.author}
    date={post.date}
    image={post.image}
    readingTime={post.readingTime}
  />

  <article class="container mx-auto px-4 py-12">
    <div class="flex flex-col lg:flex-row gap-12">
      <aside class="lg:w-72 flex-shrink-0 order-2 lg:order-1 lg:sticky lg:top-24">
        <TableOfContents headings={headings} />
      </aside>
      
      <div class="flex-grow prose prose-lg max-w-4xl mx-auto order-1 lg:order-2">
        <p class="text-xl text-gray-600 mb-8 font-medium">{post.excerpt}</p>

        <h2 id="pourquoi">Pourquoi cultiver des tomates ?</h2>
        <p>
          Ah, les tomates ! Ces petites boules de bonheur qui font la fierté de tout jardinier qui se respecte. 
          Si vous débutez dans le jardinage, vous ne pouvez pas passer à côté de ce légume-fruit star. Pourquoi ? 
          Parce que c'est facile (si, si, je vous assure), gratifiant (rien de tel que de croquer dans SA tomate), 
          et délicieux (incomparable avec les tomates du supermarché) !
        </p>

        <h2 id="varietes">Choisir ses variétés</h2>
        <p>
          Il existe des centaines de variétés de tomates, c'est un peu comme choisir un parfum de glace chez un 
          glacier italien ! Voici mes recommandations pour les débutants :
        </p>
        <ul>
          <li><strong>Coeur de Boeuf :</strong> La star des salades, grosse et charnue (mais un peu capricieuse)</li>
          <li><strong>Roma :</strong> La championne des sauces, super productive et résistante</li>
          <li><strong>Cerise :</strong> Pour le grignotage, pousse même en pot</li>
        </ul>

        <h2 id="semis">Les secrets des semis</h2>
        <p>Pour bien démarrer vos tomates, le timing est crucial. Si vous débutez en janvier, consultez notre article sur les <a href="/blog/semis-travaux-janvier-potager" class="text-leaf-600 hover:text-leaf-800">semis et travaux de janvier au potager</a> pour bien vous organiser. Les tomates se sèment généralement à l'intérieur, au chaud, entre février et avril. C'est comme élever des bébés : il faut de la patience, de l'amour et une bonne dose d'attention !</p>
        <ul>
          <li>Semez en février-mars à l'intérieur (oui, dans votre salon s'il le faut !)</li>
          <li>Utilisez des godets biodégradables (les racines adorent)</li>
          <li>Terreau spécial semis + chaleur douce = combo gagnant</li>
          <li>Arrosez par le dessous (comme au bar, mais avec de l'eau)</li>
        </ul>

        <h2 id="plantation">La plantation au top</h2>
        <p>
          Mi-mai, quand les saints de glace sont passés (ces rabat-joie qui nous font poireauter), c'est le grand jour ! 
          Voici ma technique infaillible :
        </p>
        <ul>
          <li>Faites un trou ÉNORME (40cm minimum, on n'est pas radins)</li>
          <li>Au fond : compost + corne broyée (le petit-déj des champions)</li>
          <li>Enterrez jusqu'aux premières feuilles (oui, la tige va faire des racines, magique !)</li>
          <li>Installez tout de suite les tuteurs (c'est comme la ceinture de sécurité, obligatoire)</li>
        </ul>

        <h2 id="entretien">L'entretien au quotidien</h2>
        <p>
          C'est là que ça devient fun ! Les tomates, c'est un peu comme des ados : ça pousse dans tous les sens si on ne les 
          cadre pas un minimum. Voici les gestes essentiels :
        </p>
        <ul>
          <li>Arrosage régulier (mais pas sur les feuilles, elles n'aiment pas la douche)</li>
          <li>Effeuillage des gourmands (ces petites pousses qui volent l'énergie)</li>
          <li>Support et tuteurage (pour éviter le camping sauvage dans le potager)</li>
          <li>Paillage au pied (comme une bonne couverture pour l'hiver)</li>
        </ul>

        <h2 id="recolte">La récolte et ses secrets</h2>
        <p>
          Le moment tant attendu ! Pour des tomates au top, voici mes astuces de pro :
        </p>
        <ul>
          <li>Récoltez quand les fruits sont bien colorés mais encore fermes</li>
          <li>Coupez au sécateur plutôt que de tirer (respect pour la plante)</li>
          <li>Ne mettez jamais vos tomates au frigo (c'est un crime contre le goût !)</li>
          <li>Partagez avec les voisins (ils vous donneront leurs courgettes en échange)</li>
        </ul>

        <ShareButtons title={post.title} url={currentUrl} />
      </div>
    </div>
  </article>

  <RecommendedPosts currentPost={post} allPosts={blogPosts} transition:animate="slide" />
</Layout>
