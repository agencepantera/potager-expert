---
import Layout from '../../layouts/Layout.astro';
import { blogPosts } from '../../data/blog';
import TableOfContents from '../../components/TableOfContents.astro';
import RecommendedPosts from '../../components/RecommendedPosts.astro';

const post = blogPosts.find(p => p.url === '/blog/maitriser-arrosage');
if (!post) throw new Error('Article non trouvé');

const formattedDate = new Date(post.date).toLocaleDateString('fr-FR', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

// Définir les titres pour le sommaire
const headings = [
  { text: "L'importance d'un bon arrosage", slug: "importance-bon-arrosage" },
  { text: "Quand arroser ?", slug: "quand-arroser" },
  { text: "Comment arroser ?", slug: "comment-arroser" },
  { text: "Quelle quantité d'eau ?", slug: "quelle-quantite-eau" },
  { text: "Conseils pratiques", slug: "conseils-pratiques" },
  { text: "Systèmes d'arrosage automatique", slug: "systemes-arrosage-automatique" },
  { text: "Signes de sur-arrosage et sous-arrosage", slug: "signes-arrosage" },
  { text: "Conclusion", slug: "conclusion" }
];
---

<Layout title={`${post.title} | Potager Expert`}>
  <article class="relative">
    <!-- Hero Section -->
    <div class="relative h-[60vh] min-h-[400px] max-h-[600px]">
      <img
        src={post.image}
        alt={post.title}
        class="absolute inset-0 w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-gradient-to-b from-black/50 to-black/20"></div>
      <div class="absolute inset-0 flex items-center">
        <div class="container mx-auto px-4">
          <div class="max-w-3xl">
            <h1 class="text-4xl md:text-5xl font-display font-bold text-white mb-4">
              {post.title}
            </h1>
            <p class="text-xl text-white/90 mb-6">
              {post.description}
            </p>
            <div class="flex items-center space-x-4 text-white/80">
              <div class="flex items-center">
                <img
                  src={post.author.image}
                  alt={post.author.name}
                  class="w-10 h-10 rounded-full border-2 border-white/20"
                />
                <span class="ml-2">{post.author.name}</span>
              </div>
              <span>•</span>
              <time datetime={post.date}>{formattedDate}</time>
              <span>•</span>
              <span>{post.readingTime}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contenu de l'article -->
    <div class="container mx-auto px-4 py-12">
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Sommaire -->
        <div class="lg:col-span-1">
          <TableOfContents headings={headings} />
        </div>

        <!-- Contenu principal -->
        <div class="lg:col-span-3 prose prose-lg dark:prose-invert prose-headings:font-display prose-headings:font-bold prose-h2:text-3xl prose-h3:text-2xl prose-p:text-soil-700 dark:prose-p:text-soil-300 prose-a:text-leaf-600 hover:prose-a:text-leaf-700 dark:prose-a:text-leaf-400 dark:hover:prose-a:text-leaf-300">
          <h2 id="importance-bon-arrosage">L'importance d'un bon arrosage</h2>
          <p>
            L'arrosage est l'un des aspects les plus cruciaux de la réussite d'un potager. Un arrosage inadapté peut compromettre 
            la croissance de vos légumes et favoriser l'apparition de maladies. Dans cet article, nous allons voir ensemble 
            les meilleures pratiques pour un arrosage optimal.
          </p>

          <h2 id="quand-arroser">Quand arroser ?</h2>
          <p>
            Le meilleur moment pour arroser votre potager est tôt le matin ou en fin de journée. L'arrosage en pleine journée 
            présente plusieurs inconvénients :
          </p>
          <ul>
            <li>Évaporation rapide de l'eau</li>
            <li>Risque de brûlure des feuilles par effet loupe</li>
            <li>Stress thermique pour les plantes</li>
          </ul>

          <h2 id="comment-arroser">Comment arroser ?</h2>
          <p>
            Il existe plusieurs méthodes d'arrosage, chacune ayant ses avantages :
          </p>
          <ul>
            <li>L'arrosage au pied : idéal pour les tomates et les courges</li>
            <li>L'arrosage par aspersion : pratique pour les légumes-feuilles</li>
            <li>Le goutte-à-goutte : parfait pour une irrigation contrôlée</li>
          </ul>

          <h2 id="quelle-quantite-eau">Quelle quantité d'eau ?</h2>
          <p>
            Les besoins en eau varient selon :
          </p>
          <ul>
            <li>Le type de légume</li>
            <li>Le stade de croissance</li>
            <li>La saison et le climat</li>
            <li>Le type de sol</li>
          </ul>

          <h2 id="conseils-pratiques">Conseils pratiques</h2>
          <p>
            Pour optimiser l'arrosage de votre potager :
          </p>
          <ul>
            <li>Installez un paillage pour limiter l'évaporation</li>
            <li>Utilisez un pluviomètre pour mesurer les précipitations</li>
            <li>Privilégiez un arrosage en profondeur plutôt que fréquent</li>
            <li>Adaptez l'arrosage selon la météo</li>
          </ul>

          <h2 id="systemes-arrosage-automatique">Systèmes d'arrosage automatique</h2>
          <p>
            Pour faciliter l'entretien de votre potager, vous pouvez opter pour un système d'arrosage automatique :
          </p>
          <ul>
            <li>Programmateur d'arrosage</li>
            <li>Système de goutte-à-goutte</li>
            <li>Tuyaux microporeux</li>
          </ul>

          <h2 id="signes-arrosage">Signes de sur-arrosage et sous-arrosage</h2>
          <p>
            Apprenez à reconnaître les signes :
          </p>
          <ul>
            <li>Sur-arrosage : feuilles jaunies, moisissures, sol détrempé</li>
            <li>Sous-arrosage : feuilles fanées, sol craquelé, croissance ralentie</li>
          </ul>

          <h2 id="conclusion">Conclusion</h2>
          <p>
            Un bon arrosage est la clé d'un potager prospère. En suivant ces conseils et en observant régulièrement vos plantes, 
            vous pourrez adapter votre arrosage pour obtenir les meilleurs résultats. N'oubliez pas que chaque potager est unique 
            et qu'il faudra peut-être quelques ajustements pour trouver le rythme parfait.
          </p>
        </div>
      </div>
    </div>
  </article>

  <!-- Articles recommandés -->
  <RecommendedPosts currentPost={post} allPosts={blogPosts} />
</Layout>
